:root {
  --team-list-width: 28vw;
  --team-height: min(60vh, 70vh);
  --team-transition-fast: 0.25s;
  --team-transition-medium: 0.35s;
  --team-transition-slow: 0.5s;
  --team-easing: cubic-bezier(0.4, 0, 0.2, 1);
}

/* ===== Desktop (без изменений поведения) ===== */
.team-section { border-top: 1px solid rgba(232,230,225,0.1); background:#000; color:#e8e6e1; }

.team-container {
  max-width: 90vw; margin: 0 auto; padding: 0 4vw; width: 100%;
  height: 100%; max-height: 100vh; display: flex; flex-direction: column; justify-content: center; overflow: hidden;
}

.team-header { margin-bottom: 1.5vh; }
.team-title { margin-bottom: 2.5vh; transition: opacity var(--team-transition-medium) var(--team-easing); }

.team-layout { display:grid; grid-template-columns: 1fr 0fr var(--team-list-width); gap:4vw; align-items:stretch; height:var(--team-height); }
.team-layout.has-hover { grid-template-columns: 0.5fr 0.5fr var(--team-list-width); }

/* Photo */
.team-photo-large { position:relative; width:100%; height:100%; background:#111; border:1px solid rgba(232,230,225,0.15); overflow:hidden; min-height:0; }
.team-photo-img { position:absolute; inset:0; width:100%; height:100%; display:block; will-change:opacity; pointer-events:none; object-fit:cover; }
.team-photo-overlay { position:absolute; bottom:0; left:0; right:0; padding:1.8vh 2.5vw; background:linear-gradient(to top, rgba(0,0,0,.85), transparent); display:flex; align-items:center; z-index:10; }
.team-count { font-size:1.1vw; font-weight:300; letter-spacing:.05vw; opacity:.9; }

/* List (desktop) */
.team-members-list { display:flex; flex-direction:column; gap:1.5vh; height:100%; min-height:0; width:var(--team-list-width); flex-shrink:0; }
.team-names-wrapper { flex:1; min-height:0; overflow:hidden; }
.team-names { list-style:none; display:grid; grid-template-columns:1fr; gap:1.2vh; height:100%; overflow-y:auto; padding-right:.5vw; margin:0; }
.team-names::-webkit-scrollbar { width:.25vw; }
.team-names::-webkit-scrollbar-track { background:rgba(232,230,225,.05); }
.team-names::-webkit-scrollbar-thumb { background:rgba(232,230,225,.2); }
.team-names::-webkit-scrollbar-thumb:hover { background:rgba(232,230,225,.3); }

.team-member-item {
  display:flex; align-items:center; gap:1.5vw; padding:1.2vh 0;
  border-bottom:1px solid rgba(232,230,225,.08);
  transition: transform var(--team-transition-medium) var(--team-easing), border-color var(--team-transition-medium) var(--team-easing), padding var(--team-transition-medium) var(--team-easing), background var(--team-transition-fast) var(--team-easing);
  cursor:pointer; box-sizing:border-box;
}
.team-member-item:hover, .team-member-item.locked { border-bottom-color:rgba(232,230,225,.3); padding-left:.6vw; transform:translateX(.3vw); }
.team-member-item.locked { background:rgba(232,230,225,.05); }

.member-number { font-size:.8vw; opacity:.4; font-weight:300; min-width:1.5vw; text-align:right; align-self:flex-start; margin-top:.2vh; transition:opacity var(--team-transition-fast) var(--team-easing); }
.team-member-item:hover .member-number, .team-member-item.locked .member-number { opacity:.7; }

.member-info { display:flex; flex-direction:column; gap:.3vh; flex:1; }
.member-name { font-size:1.1vw; font-weight:300; letter-spacing:.02vw; opacity:.92; line-height:1.3; transition:opacity var(--team-transition-fast) var(--team-easing); }
.team-member-item:hover .member-name, .team-member-item.locked .member-name { opacity:1; }
.member-role { font-size:.85vw; font-weight:300; letter-spacing:.01vw; opacity:.5; line-height:1.2; }
.team-member-item:hover .member-role, .team-member-item.locked .member-role { opacity:.7; }

/* Experience */
.team-experience { height:100%; min-height:0; overflow:hidden; opacity:0; pointer-events:none; padding:0; background:transparent; display:flex; flex-direction:column; justify-content:flex-start; gap:1.2vh; transform:translateX(1.2vw); }
.team-layout.has-hover .team-experience { opacity:1; pointer-events:auto; padding:2vh 2vw; transform:translateX(0); }
.team-exp-title { font-size:1.3vw; font-weight:300; letter-spacing:.02vw; opacity:.95; }
.team-exp-role { font-size:.95vw; opacity:.6; margin-bottom:1vh; }
.team-exp-points { font-size:.95vw; line-height:1.5; opacity:.9; display:grid; gap:.8vh; }

/* Mobile nav hidden on desktop */
.team-mobile-navigation { display:none; }

/* ========= MOBILE & TABLET - ИСПРАВЛЕНО ========= */
@media (max-width: 1023px) {

  .team-container {
    max-width:100vw; width:100vw; height:100svh; max-height:100svh;
    padding:0; margin:0; display:flex; flex-direction:column;
  }

  .team-header {
    padding:3vh 5vw 2vh; margin:0; display:flex; flex-direction:column; gap:.8vh;
  }
  .team-header .section-label { font-size:11px; line-height:1.1; letter-spacing:.05em; }
  .team-header .team-title, .team-header .section-title { font-size:28px; line-height:1.1; margin:0; }
  .team-title { transition: none; }

  .team-layout {
    display:flex; flex-direction:column; gap:0; width:100%; height:auto; flex:1 1 auto; min-height:0;
  }
  .team-layout.has-hover { display:flex; }

  .team-photo-large {
    width:90vw; margin:0 auto; border-radius:2vw;
    flex:0.85 1 auto;
    min-height:0;
    position:relative;
  }
  .team-photo-img { 
    border-radius:2vw; 
    object-fit:cover !important;
    will-change: auto;
  }

  .team-count { font-size:3.5vw; }
  .team-experience { display:none !important; }

  .team-members-list {
    flex:0 0 45svh; height:45svh; width:100vw; overflow:hidden; padding:0; margin:0;
    display:flex; flex-direction:column; justify-content:flex-start;
  }

  .team-mobile-navigation {
    display:flex; align-items:center; justify-content:space-between;
    gap:3vw; padding:1.2vh 5vw 1vh; width:100%; box-sizing:border-box; flex:0 0 auto;
  }

  /* ИСПРАВЛЕНО: Оптимизация кнопок навигации */
  .team-nav-button {
    background:transparent; border:1px solid rgba(232,230,225,.3); border-radius:50%;
    width:10vw; height:10vw; min-width:44px; min-height:44px; max-width:44px; max-height:44px;
    display:flex; align-items:center; justify-content:center; cursor:pointer; color:#e8e6e1; 
    transition: none;
    flex-shrink:0; padding:0; box-sizing:border-box;
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
  }
  .team-nav-button svg { width:20px; height:20px; }
  .team-nav-button:disabled { opacity:.2; cursor:not-allowed; border-color:rgba(232,230,225,.1); }
  .team-nav-button:not(:disabled):active { 
    transform:scale(.92); 
    background:rgba(232,230,225,.1); 
  }

  .team-pagination { 
    display:flex; gap:2vw; align-items:center; justify-content:center; flex:1; min-width:0; 
  }
  
  /* ИСПРАВЛЕНО: Оптимизация pagination dots */
  .team-pagination-dot { 
    width:8px; height:8px; border-radius:999px; background:rgba(232,230,225,.3); 
    border:none; padding:0; cursor:pointer; 
    transition: none;
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
  }
  .team-pagination-dot.active { 
    background:rgba(232,230,225,.9); 
    width:24px; 
  }

  /* ИСПРАВЛЕНО: Оптимизация горизонтального скролла */
  .team-names-wrapper.mobile-scroll {
    width:100vw; height:calc(45svh - 56px);
    overflow-x:auto; overflow-y:hidden; scroll-snap-type:x mandatory; 
    -webkit-overflow-scrolling:touch; 
    scrollbar-width:none; -ms-overflow-style:none;
    flex:1 1 auto; padding-left:6vw; padding-right:6vw; box-sizing:border-box;
    /* ИСПРАВЛЕНО: Критично для производительности */
    will-change: scroll-position;
  }
  .team-names-wrapper.mobile-scroll::-webkit-scrollbar { display:none; }

  .team-names-wrapper.mobile-scroll .team-names {
    display:flex; flex-direction:row; gap:3vw;
    padding:0 !important; margin:0 !important;
    height:100%; width:max-content; min-width:100%; box-sizing:border-box; align-items:flex-start;
  }

  /* ИСПРАВЛЕНО: Оптимизация карточек */
  .team-names-wrapper.mobile-scroll .team-member-item {
    flex:0 0 28vw; min-width:28vw; max-width:28vw;
    scroll-snap-align:start;
    flex-direction:column; align-items:flex-start; gap:6px;
    padding:12px 10px; border:1px solid rgba(232,230,225,.15); border-radius:8px; 
    background:rgba(232,230,225,.03);
    box-sizing:border-box;
    height:auto;
    /* ИСПРАВЛЕНО: Убираем сложные transitions */
    transition: none;
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
  }
  
  /* ИСПРАВЛЕНО: Убираем hover-эффекты */
  .team-names-wrapper.mobile-scroll .team-member-item:hover { 
    padding:12px 10px; 
    transform:none; 
  }

  .team-names-wrapper.mobile-scroll .member-number { 
    font-size:11px; min-width:auto; margin-top:0; opacity:.5;
    transition: none;
  }
  
  .team-names-wrapper.mobile-scroll .member-info { 
    gap:4px; width:100%; 
  }
  
  .team-names-wrapper.mobile-scroll .member-name { 
    font-size:14px; line-height:1.25; word-break:break-word;
    transition: none;
  }
  
  .team-names-wrapper.mobile-scroll .member-role { 
    font-size:12px; line-height:1.3; word-break:break-word; opacity:.7;
    transition: none;
  }
}

/* ИСПРАВЛЕНО: Специальные фиксы для iOS */
@supports (-webkit-touch-callout: none) {
  @media (max-width: 1023px) {
    .team-names-wrapper.mobile-scroll {
      -webkit-overflow-scrolling: touch;
      /* ИСПРАВЛЕНО: Дополнительная оптимизация для iOS */
      transform: translateZ(0);
      -webkit-transform: translateZ(0);
    }
    
    .team-member-item {
      -webkit-tap-highlight-color: transparent;
      -webkit-touch-callout: none;
    }
    
    .team-nav-button,
    .team-pagination-dot {
      -webkit-tap-highlight-color: transparent;
      -webkit-touch-callout: none;
    }
  }
}

/* Сверхузкие экраны */
@media (max-width: 360px) {
  .team-mobile-navigation { gap:2vw; }
  .team-nav-button { min-width:36px; min-height:36px; max-width:36px; max-height:36px; }
  .team-names-wrapper.mobile-scroll .team-names { gap:2.4vw; }
  .team-names-wrapper.mobile-scroll .team-member-item {
    flex:0 0 clamp(100px, 28vw, 34vw);
    min-width:clamp(100px, 28vw, 34vw);
  }
}

@media (max-width: 767px) {
  .team-header .team-title, .team-header .section-title { font-size:26px; }
}
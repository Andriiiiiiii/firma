import React, { useState, useEffect } from 'react'
import CrystalLattice from './DotGrid.jsx'

export default function Cover() {
  const [showAnimation, setShowAnimation] = useState(true)

  useEffect(() => {
    // Проверяем, не мобильное ли это устройство
    const checkDevice = () => {
      const isMobile = window.innerWidth < 1024 || 
                      /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)
      setShowAnimation(!isMobile)
    }

    checkDevice()
    
    // Добавляем слушатель на изменение размера
    const handleResize = () => checkDevice()
    window.addEventListener('resize', handleResize)
    
    return () => window.removeEventListener('resize', handleResize)
  }, [])

  return (
    <section
      id="cover"
      className="cover snap-section"
    >
      {/* Кристаллическая решётка на фоне - только для десктопа */}
      {showAnimation ? (
        <div className="cover-background">
          <CrystalLattice />
        </div>
      ) : (
        <div className="cover-background" style={{ background: '#000' }} />
      )}

      {/* Логотип по центру */}
      <div className="cover-logo">
        <svg 
          width="576" 
          height="266" 
          viewBox="0 0 576 266" 
          fill="none" 
          xmlns="http://www.w3.org/2000/svg"
        >
          <path d="M111.686 108.909V123.114H52.8793V108.909H111.686ZM70.4929 218V93.8523C70.4929 87.6023 71.9607 82.3939 74.8963 78.2273C77.8319 74.0606 81.6435 70.9356 86.331 68.8523C91.0185 66.7689 95.9664 65.7273 101.175 65.7273C105.294 65.7273 108.656 66.0587 111.26 66.7216C113.864 67.3845 115.805 68 117.084 68.5682L112.254 83.0568C111.402 82.7727 110.218 82.4176 108.703 81.9915C107.235 81.5653 105.294 81.3523 102.879 81.3523C97.3395 81.3523 93.3385 82.749 90.8764 85.5426C88.4616 88.3362 87.2543 92.4318 87.2543 97.8295V218H70.4929ZM135.177 218V108.909H151.938V218H135.177ZM143.7 90.7273C140.433 90.7273 137.615 89.6146 135.248 87.3892C132.928 85.1638 131.768 82.4886 131.768 79.3636C131.768 76.2386 132.928 73.5634 135.248 71.3381C137.615 69.1127 140.433 68 143.7 68C146.967 68 149.76 69.1127 152.08 71.3381C154.448 73.5634 155.631 76.2386 155.631 79.3636C155.631 82.4886 154.448 85.1638 152.08 87.3892C149.76 89.6146 146.967 90.7273 143.7 90.7273ZM182.638 218V108.909H198.831V125.386H199.967C201.956 119.989 205.554 115.609 210.763 112.247C215.971 108.885 221.842 107.205 228.376 107.205C229.607 107.205 231.146 107.228 232.993 107.276C234.839 107.323 236.236 107.394 237.183 107.489V124.534C236.615 124.392 235.313 124.179 233.277 123.895C231.288 123.563 229.181 123.398 226.956 123.398C221.653 123.398 216.918 124.51 212.751 126.736C208.632 128.914 205.365 131.944 202.95 135.827C200.583 139.662 199.399 144.042 199.399 148.966V218H182.638ZM257.052 218V108.909H273.245V125.955H274.665C276.938 120.131 280.608 115.609 285.674 112.389C290.74 109.122 296.825 107.489 303.927 107.489C311.124 107.489 317.113 109.122 321.896 112.389C326.725 115.609 330.489 120.131 333.188 125.955H334.325C337.118 120.32 341.308 115.846 346.896 112.531C352.483 109.17 359.183 107.489 366.995 107.489C376.749 107.489 384.727 110.543 390.93 116.651C397.132 122.711 400.234 132.157 400.234 144.989V218H383.472V144.989C383.472 136.939 381.271 131.187 376.867 127.73C372.464 124.274 367.279 122.545 361.313 122.545C353.643 122.545 347.701 124.866 343.487 129.506C339.272 134.098 337.165 139.922 337.165 146.977V218H320.12V143.284C320.12 137.081 318.108 132.086 314.083 128.298C310.058 124.463 304.874 122.545 298.529 122.545C294.173 122.545 290.101 123.705 286.313 126.026C282.573 128.346 279.542 131.565 277.222 135.685C274.95 139.757 273.813 144.468 273.813 149.818V218H257.052ZM462.982 220.557C456.069 220.557 449.796 219.255 444.161 216.651C438.527 213.999 434.052 210.188 430.738 205.216C427.424 200.197 425.766 194.136 425.766 187.034C425.766 180.784 426.997 175.718 429.46 171.835C431.922 167.905 435.212 164.828 439.332 162.602C443.451 160.377 447.996 158.72 452.968 157.631C457.987 156.494 463.03 155.595 468.096 154.932C474.725 154.08 480.099 153.44 484.218 153.014C488.385 152.541 491.415 151.759 493.309 150.67C495.25 149.581 496.221 147.687 496.221 144.989V144.42C496.221 137.413 494.303 131.968 490.468 128.085C486.68 124.203 480.927 122.261 473.21 122.261C465.208 122.261 458.934 124.013 454.388 127.517C449.843 131.021 446.647 134.761 444.8 138.739L428.891 133.057C431.732 126.428 435.52 121.267 440.255 117.574C445.037 113.833 450.246 111.229 455.88 109.761C461.562 108.246 467.149 107.489 472.641 107.489C476.145 107.489 480.17 107.915 484.715 108.767C489.308 109.572 493.735 111.253 497.996 113.81C502.305 116.366 505.88 120.225 508.721 125.386C511.562 130.547 512.982 137.46 512.982 146.125V218H496.221V203.227H495.369C494.232 205.595 492.338 208.128 489.687 210.827C487.035 213.526 483.508 215.822 479.104 217.716C474.701 219.61 469.327 220.557 462.982 220.557ZM465.539 205.5C472.168 205.5 477.755 204.198 482.3 201.594C486.893 198.99 490.35 195.628 492.67 191.509C495.037 187.389 496.221 183.057 496.221 178.511V163.17C495.511 164.023 493.948 164.804 491.533 165.514C489.166 166.177 486.42 166.769 483.295 167.29C480.217 167.763 477.21 168.189 474.275 168.568C471.387 168.9 469.043 169.184 467.244 169.42C462.888 169.989 458.816 170.912 455.028 172.19C451.287 173.421 448.257 175.292 445.937 177.801C443.664 180.263 442.528 183.625 442.528 187.886C442.528 193.71 444.682 198.114 448.991 201.097C453.347 204.032 458.863 205.5 465.539 205.5Z" fill="white"/>
          <path d="M481.824 90H467.224L482.224 42H497.024L481.824 90Z" fill="white"/>
        </svg>
      </div>

      {/* Подпись внизу слева */}
      <div className="cover-caption">
        <span>/ 01</span>&nbsp;&nbsp;<span>/ Digital Agency</span>
      </div>
    </section>
  )
}